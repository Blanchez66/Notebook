# Greedy Algorithms
## 1 Introduction
### 1.1 ä¼˜åŒ–é—®é¢˜ä¸è´ªå¿ƒæ³•
è´ªå¿ƒç®—æ³•ä¸€èˆ¬æ˜¯é’ˆå¯¹è§£å†³ä¼˜åŒ–é—®é¢˜çš„ã€‚åœ¨å›æº¯ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬æåˆ°äº†â€œä¼˜åŒ–å‡½æ•°â€ã€‚å¦‚ç»™å®šä¸€ç»„çº¦æŸæ¡ä»¶å’Œä¸€ä¸ªä¼˜åŒ–å‡½æ•°ã€‚æ»¡è¶³çº¦æŸæ¡ä»¶çš„è§£ç§°ä¸ºå¯è¡Œè§£ã€‚ä½¿ä¼˜åŒ–å‡½æ•°å€¼è¾¾åˆ°æœ€ä¼˜çš„å¯è¡Œè§£ç§°ä¸ºæœ€ä¼˜è§£ã€‚ 

!!! note "è´ªå¿ƒæ³•"
    åœ¨æ¯ä¸ªé˜¶æ®µï¼Œæ ¹æ®æŸç§å‡†åˆ™åšå‡ºæœ€ä½³å†³ç­–ã€‚åœ¨ä¸€ä¸ªé˜¶æ®µåšå‡ºçš„å†³ç­–åœ¨åç»­é˜¶æ®µä¸ä¼šæ”¹å˜ï¼Œå› æ­¤æ¯ä¸ªå†³ç­–éƒ½åº”ç¡®ä¿å¯è¡Œæ€§ã€‚

### 1.2 å…¨å±€æœ€ä¼˜/å±€éƒ¨æœ€ä¼˜
åªæœ‰å½“**å…¨å±€æœ€ä¼˜ = å±€éƒ¨æœ€ä¼˜**ï¼Œè´ªå¿ƒæ³•æ‰èƒ½å¾—åˆ°ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æœ€ä¼˜è§£ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹è´ªå¿ƒç®—æ³•**ä¸èƒ½ä¿è¯**æ‰¾åˆ°æœ€ä¼˜è§£ã€‚

å®ƒé€šå¸¸èƒ½ç”Ÿæˆéå¸¸æ¥è¿‘æœ€ä¼˜è§£çš„è§£ï¼ˆå¯å‘å¼ç®—æ³•ï¼‰ï¼Œå› æ­¤å½“å¯»æ‰¾æœ€ä¼˜è§£è€—æ—¶è¿‡é•¿æ—¶ï¼Œè´ªå¿ƒç®—æ³•is intuitively appealing.

### 1.3 æœ€å¤§ä¼˜ç‚¹
å¿«ï¼Œæ•ˆç‡é«˜ï¼Œä¸€æ­¥åˆ°ä½ã€‚å¯ä»¥ç”¨è´ªå¿ƒæ³•å¿«é€Ÿå¾—åˆ°ä¸€ä¸ªè¿˜ä¸é”™çš„å¯è¡Œè§£ä½œä¸ºæ¯”è¾ƒçš„å¯¹è±¡ã€‚

å›æº¯æ³•å’ŒåŠ¨æ€è§„åˆ’åœ¨æšä¸¾è¿‡ç¨‹ä¸­æœ‰å¯èƒ½å¾ˆæ…¢ã€‚

å¯ä»¥ç”¨è´ªå¿ƒæ³•æ¥å¿«é€Ÿä¼°è®¡ä¸€ä¸ªè§£ï¼Œä¸ä¸€å®šæ˜¯å…¨å±€æœ€ä¼˜ï¼Œä½†å¯ä»¥æ˜¯å±€éƒ¨æœ€ä¼˜ï¼Œï¼ˆæ²¡æœ‰é‚£ä¹ˆå¥½ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆåï¼‰ã€‚
!!! tip "æ¢¯åº¦ä¸‹é™"
    ä¸€ç§è®­ç»ƒæ¨¡å‹çš„ç®—æ³•ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§è´ªå¿ƒç®—æ³•ã€‚

## 2 Activity Selection Problem
### 2.1 Example
Given a set of activities \( S = \{a_1, a_2, \ldots, a_n\} \) that wish to use a resource (e.g. a classroom). Each \( a_i \) takes place during a time interval \({[}s_i, f_i{)}\).

Activities \( a_i \) and \( a_j \) are compatible if \( s_i \geq f_j \) or \( s_j \geq f_i \) (i.e. their time intervals do not overlap).

å°½å¯èƒ½æ‰¾åˆ°ç›¸å®¹çš„ä¸¤ä¸ªæ´»åŠ¨ï¼šæ´»åŠ¨ä¸€ç»“æŸæ—¶é—´æ—©äºæ´»åŠ¨äºŒæˆ–è€…æ´»åŠ¨äºŒç»“æŸæ—¶é—´æ—©äºæ´»åŠ¨ä¸€ã€‚

Select a maximum-size subset of mutually compatible activities.

![alt text](../../assets/ADS/image7_1.png){width="100%".center}

??? question "æ€è€ƒï¼šæ€ä¹ˆç”¨DPæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ"

    å‡è®¾æ‰€æœ‰æ´»åŠ¨å…ˆæŒ‰ç…§ç»“æŸæ—¶é—´æ’åºã€‚

    $C_{i j}$æ˜¯ç¬¬$i$é—¨è¯¾å¼€å§‹ä»¥åï¼Œç¬¬$j$é—¨è¯¾å¼€å§‹ä»¥å‰ï¼Œèƒ½å¤Ÿæ”¾ä¸‹çš„æœ€å¤šçš„è¯¾ç¨‹æ•°ã€‚å°†ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´åŒºé—´ä½œä¸ºçŠ¶æ€ã€‚

    $$
    a_1 \ a_2 \ \cdots \ \underbrace{a_k \ \cdots \ a_j}_{S_{ij}} \ \cdots \ a_n
    $$

    $$
    c_{ij} = 
    \begin{cases} 
    0 & \text{if } S_{ij} = \emptyset \\ 
    \max\limits_{a_k \in S_{ij}} \{ c_{ik} + c_{kj} + 1 \} & \text{if } S_{ij} \neq \emptyset 
    \end{cases}
    $$

    ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºè¿™ç§çŠ¶æ€ $f[i][j]$ï¼Œå¾ˆæ˜æ˜¾åŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦ä¸º$O( N^2 )$ã€‚

    ä½†æ˜¯ï¼Œå½“å•ä¸ªæ´»åŠ¨æ—¶é—´å¾ˆé•¿æ—¶ï¼Œæ•°ç»„å°±çˆ†æ‰äº†ã€‚å¹¶ä¸”ï¼Œç”¨æ—¶é—´å®šä¹‰çŠ¶æ€ä¼šæœ‰éå¸¸å¤šçš„æµªè´¹ï¼Œå› ä¸ºæˆ‘ä»¬åªè€ƒè™‘ç«¯ç‚¹ï¼Œä¸­é—´çš„æ—¶é—´èŠ‚ç‚¹éƒ½æµªè´¹äº†ã€‚

    ç”¨æ´»åŠ¨çš„ç¼–å·æ¥ä»£æ›¿æ—¶é—´ï¼Ÿæ²¡æ³•çŠ¶æ€è½¬ç§»ï¼æ²¡æ³•ä¿è¯ç›¸å®¹ï¼Œå› ä¸ºåªç¡®ä¿ç»“æŸæ—¶é—´æ˜¯æœ‰åºçš„ï¼Œæ²¡æœ‰ç®¡ç†å¼€å§‹æ—¶é—´ã€‚

    æŠŠæ—¶é—´å®šä¹‰æ”¹æˆä¸¤ä¸ªå¼€åŒºé—´å°±å¯ä»¥è½¬ç§»çŠ¶æ€ã€‚~~ï¼ˆå…¶å®è¿™å¥è¯æˆ‘æ²¡æ‡‚ï¼‰~~

### 2.2 è®°å¿†åŒ–æœç´¢
å½“çŠ¶æ€çš„æŸ¥æ‰¾é¡ºåº $iã€j$ æ²¡æœ‰é‚£ä¹ˆæ˜ç¡®ï¼Œå¯ä»¥å†™æˆè¿­ä»£çš„å½¢å¼ã€‚

```c
//å®šä¹‰å‡½æ•°
DP(i, j){
    for(k= ...)
        if(F[i][k] == -1 ï½œï½œ F[k][j] != -1) //è¿™ä¸¤ä¸ªå­çŠ¶æ€æ²¡æœ‰è¢«è®¡ç®—è¿‡
            DP(i,k);
            ...
        else
            // F[i][j]=ï¼ˆæ ¹æ®çŠ¶æ€æ–¹ç¨‹è®¡ç®—ï¼‰;
}
```
### 2.3 Greedy Rule
âŒ Greedy Rule 1: Select the interval which **starts earliest** (but not overlapping the already chosen intervals) 

âŒ Greedy Rule 2: Select the interval which is the  **shortest** (but not overlapping the already chosen intervals) 

âŒ Greedy Rule 3: Select the interval **with the fewest conflicts** with other remaining intervals (but not overlapping the already chosen intervals) 

âœ… Greedy Rule 4: Select the interval which **ends first** (but not overlapping the already chosen intervals) 

Resource become free as soon as possible.
ç»“æŸçš„è¶Šæ—©è¶Šèƒ½æŠŠè¿™èµ„æºç»™ç©ºå‡ºæ¥ã€‚

!!! question "ğŸ¤”å¦‚ä½•è¯æ˜ä¸€ä¸ªè´ªå¿ƒæ³•çš„æ­£ç¡®æ€§ï¼Ÿ"
    1ï¸âƒ£ Algorithm gives non-overlapping intervalsï¼ˆå¯è¡Œè§£è¯æ˜ï¼Œæ›¿æ¢ä¹‹åæ˜¯å¦ä¼šå‘ç”Ÿå†²çªï¼Ÿæ˜“ï¼‰

    2ï¸âƒ£ The result is optimalï¼ˆæœ€ä¼˜è§£è¯æ˜ï¼Œéš¾ï¼‰

    ï¼ˆç±»ä¼¼åŠ¨æ€è§„åˆ’æœ€ä¼˜å­ç»“æ„çš„è¯æ˜ï¼šï¼‰å‡è®¾æœ€ä¼˜è§£çš„ç¬¬ä¸€ä¸ªå…ƒç´ $a_{ef}$ä¸æ˜¯è´ªå¿ƒæ³•æ±‚å‡ºæ¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ $a_m$ï¼Œå°è¯•ç”¨è´ªå¿ƒæ³•æ±‚å‡ºæ¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ›¿æ¢å®ƒï¼Œçœ‹èƒ½ä¸èƒ½æ›¿æ¢/æ›¿æ¢ä¹‹åä¼šä¸ä¼šå˜å¾—æ›´å·®ï¼ˆåªè¦ä¸å˜å¾—æ›´å·®å°±è¡Œï¼‰ã€‚

    åƒåˆ†æ²»æ³•ï¼Œæ‹¿å‡º $S_1$ï¼Œè§„æ¨¡ä¸º$N$çš„åŸé—®é¢˜ä¾èµ–äºæ›´å°è§„æ¨¡ï¼ˆ$N-1$ï¼‰å­é—®é¢˜çš„æœ€ä¼˜è§£è€Œä¸æ˜¯å®ƒæœ¬èº«çš„æ¬¡ä¼˜è§£ã€‚

!!! abstract "Theorem"
    è€ƒè™‘ä»»æ„éç©ºå­é—®é¢˜ $S_k$ï¼Œå¹¶è®¾ $a_m$ æ˜¯ $S_k$ ä¸­å…·æœ‰æœ€æ—©ç»“æŸæ—¶é—´çš„æ´»åŠ¨ã€‚é‚£ä¹ˆ $a_m$ å¿…å®šåŒ…å«åœ¨ $S_k$ çš„æŸä¸ªæœ€å¤§å…¼å®¹æ´»åŠ¨å­é›†ä¸­ã€‚

!!! success "Proof"
    è®¾ $A_k$ æ˜¯æœ€ä¼˜è§£é›†ï¼Œ $a_{ef}$ æ˜¯ $A_k$ ä¸­å…·æœ‰æœ€æ—©ç»“æŸæ—¶é—´çš„æ´»åŠ¨ã€‚
    $a_m$ ä¸€å®šæ—©äº $a_{ef}$ï¼Œæ‰€ä»¥è‚¯å®šæ˜¯ä¸ä¼šå’Œåé¢ç¬¬äºŒä¸ªæ´»åŠ¨å†²çªã€‚

    å¦‚æœ $a_m$ å’Œ $a_{ef}$ ç›¸åŒï¼Œåˆ™è¯æ˜å®Œæ¯•ï¼å¦åˆ™ ......
    ç”¨ $a_m$ æ›¿æ¢ $a_{ef}$ å¾—åˆ° $A_k'$ã€‚
    ç”±äº $f_m \le f_{ef}$ï¼Œ$A_k'$ æ˜¯å¦ä¸€ä¸ªæœ€ä¼˜è§£ã€‚

$T = O( N log N )$


### 2.4 Another Look at DP Solution ğŸ§
~~è¿™é‡Œæˆ‘æ²¡å¬æ‡‚ä¸ºä»€ä¹ˆä¸Šé¢é‚£ç§DPæ˜¯åœ¨æ±‚åºåˆ—ï¼Œè€Œè¿™é‡Œåœ¨æ±‚é›†åˆï¼ˆä¸Šé¢è¦æ±‚é€‰å–é¡ºåºï¼Œè¿™é‡Œä¸é€‰å–ï¼‰~~

$$c_{1,j} = \begin{cases} 1 & \text{if } j=1 \\ \max\{c_{1,j-1}, c_{1,k(j)} + 1\} & \text{if } j>1 \end{cases}$$

ä¸¤ç§å¯èƒ½æƒ…å†µï¼šæœ€åä¸€é—¨è¯¾é€‰è¿˜æ˜¯ä¸é€‰ï¼Ÿ

where $c_{1,j}$ is the optimal solution for $a_1$ to $a_j$, and $a_{k(j)}$ is **the nearest compatible activity** ï¼ˆä»åå¾€å‰ä¸å†²çªçš„ç¬¬ä¸€é—¨ï¼‰ to $a_j$ that is finished before $a_j$.

If each activity has a weight ...

Q1: Is the Greedy solution still correct?
âŒä¸èƒ½è´ªå¿ƒäº†

Q2: Is the DP solution still correct?
âœ…

$$c_{1,j} = \begin{cases} w_1 & \text{if } j=1 \\ \max\{c_{1,j-1}, c_{1,k(j)} + w_j\} & \text{if } j>1 \end{cases}$$


### 2.5 çŠ¶æ€è½¬ç§»
åŠ¨æ€è§„åˆ’ï¼šä¸€ä¸ªç¬¬Nä¸ªåŸé—®é¢˜ï¼Œä¾èµ–äºä¸Šä¸€ä¸ªçŠ¶æ€çš„å­é—®é¢˜ï¼Œå…·ä½“æ˜¯å“ªä¸ªæ˜¯ä¸çŸ¥é“çš„ï¼Œæ˜¯éœ€è¦æšä¸¾çš„ã€‚
è´ªå¿ƒï¼šçŠ¶æ€è½¬ç§»æ˜¯å”¯ä¸€çš„ã€‚é—®é¢˜è§„æ¨¡ä¸ºNçš„é—®é¢˜ä¸€å®šæ˜¯æœ‰N-1è½¬ç§»è¿‡æ¥çš„ï¼Œä»¥æ­¤ç±»æ¨ã€‚

??? info "Elements of the Greedy Strategy"
    Cast the optimization problem as one in which we make a choice and are left with one subproblem to solve.

    Prove that there is always an optimal solution to the original problem that makes the greedy choice, so that the greedy choice is always safe.

    Demonstrate optimal substructure by showing that, having made the greedy choice, what remains is a subproblem with the property that if we combine an optimal solution to the subproblem with the greedy choice we have made, we arrive at an optimal solution to the original problem.

    Beneath every greedy algorithm, there is almost always a more cumbersome dynamic-programming solution


## 3 Huffmanâ€™s Algorithm
ç¦»æ•£æ•°å­¦ä¸­è®²è¿‡ã€‚

é¢‘ç‡è¶Šé«˜ä½¿ç”¨çš„bitæ•°æ›´å°‘/1æ›´å°‘ã€‚
ä»£ä»·å°±æ˜¯å­—ç¬¦åœ¨æ ‘ä¸­çš„æ·±åº¦ã€‚

**The trick is: No code is a prefix of another.**
ä»»ä½•ä¸€ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯å¦ä¸€ä¸ªå­—ç¬¦çš„å‰ç¼€ã€‚

ğŸ‘ï¸ Any sequence of bits can always be decoded unambiguously if the characters are placed only at the leaves of a full treeï¼ˆè¦ä¹ˆä¸¤ä¸ªå­©å­è¦ä¹ˆæ²¡æœ‰å­©å­ï¼‰ â€“ such kind of code is called prefix code.

æ¯æ¬¡åˆå¹¶ä¸¤ä¸ªå‡ºç°é¢‘ç‡æœ€ä½çš„ï¼Œå°†å®ƒä¿©çš„é¢‘ç‡ä¹‹å’Œä½œä¸ºçˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œå†åœ¨æ¥ä¸‹æ¥çš„èŠ‚ç‚¹é‡Œæ‰¾ä¸¤ä¸ªé¢‘ç‡æœ€ä½çš„ï¼Œä»¥æ­¤ç±»æ¨ã€‚æœ€åå¾€å·¦æ ‡0ï¼Œå¾€å³æ ‡1ã€‚

!!! question "â“å¦‚ä½•è¯æ˜æ­£ç¡®æ€§"
    1ï¸âƒ£ æ•´æ£µæ ‘æ»¡è¶³å€¼åœ¨å¶å­èŠ‚ç‚¹/full treeçš„è¦æ±‚ï¼Œå› æ­¤å¶å­èŠ‚ç‚¹çš„æ›¿æ¢ä¸ä¼šé€ æˆéæ³•çš„è§£ã€‚

    2ï¸âƒ£ æ˜¾ç„¶ï¼ŒæŠŠé¢‘ç‡æ›´ä½çš„è§£æ”¾åˆ°æœ€æ·±çš„åœ°æ–¹ï¼Œé¢‘ç‡é«˜çš„æ”¾åˆ°æµ…çš„åœ°æ–¹ï¼Œå› æ­¤ä¸ä¼šè®©æ•´æ£µæ ‘ä»£ä»·å˜å¾—æ›´å¤§ã€‚

    3ï¸âƒ£ **è¯æ˜æœ€ä¼˜å­ç»“æ„ï¼ˆå³åŸé—®é¢˜çš„æœ€ä¼˜è§£ä¾èµ–äºå­é—®é¢˜çš„æœ€ä¼˜è§£ï¼‰**ï¼ˆä¸€èˆ¬ç”¨åè¯æ³•è¯æ˜ï¼‰

    ![alt text](../../assets/ADS/image7_2.png)
        
    å‡è®¾ $T'$ ä¸ºå­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Œå…¶ä¸èƒ½å¯¼å‡ºåŸé—®é¢˜çš„æœ€ä¼˜è§£ï¼Œå¯¼å‡ºçš„æ˜¯åŸé—®é¢˜çš„æ¬¡ä¼˜è§£ $T$ ã€‚
        
    æˆ‘ä»¬å¯¹åŸé—®é¢˜åšä¸€ä¸ªå˜åŒ–ã€‚å‡è®¾åŸé—®é¢˜æœ€ä¼˜è§£ $T^*$ ï¼Œï¼ˆç»“è®ºï¼‰ä¸€å®šåœ¨æœ€æ·±çš„ä½ç½®æ˜¯ $xã€y$ ï¼Œç¬¬ä¸€æ­¥å·²ç»è¯è¿‡äº†ã€‚æŠŠ $xã€y$ åˆå¹¶æˆ $z$ ï¼Œå¾—åˆ° $T'^{*}$ å¾—åˆ° $abxy$ çš„å­é—®é¢˜ã€‚

    $$
    T'^{*} = T^* - f(x) - f(y) < T - f(x) - f(y) = T'
    $$

    æˆ‘ä»¬å¯¼å‡ºäº†ä¸€ä¸ªæ¯”å­é—®é¢˜æœ€ä¼˜è§£ $T'$æ›´ä¼˜çš„è§£ï¼ŒçŸ›ç›¾ã€‚


